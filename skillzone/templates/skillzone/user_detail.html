{% extends 'partials/base.html' %}
{% block title %}User Profile{% endblock %}
{% block content %}
<div class="container mt-5 pt-4 min-vh-100">
  <div class="row">
    <div class="col-md-4">
      <div class="sbz-card mb-4">
        <div class="sbz-card-header">
          <h2 class="sbz-card-title mb-0">{{ other_user.username }}</h2>
        </div>
        <div class="sbz-card-body">
          {% if other_user.profilemodel %}
          <p class="mb-1"><strong>Full name:</strong> {{ other_user.profilemodel.full_name }}</p>
          <p class="mb-1"><strong>Address:</strong> {{ other_user.profilemodel.address }}</p>
          <p class="mb-1">
            <strong>Gender:</strong>
            {{ other_user.profilemodel.get_gender_display }}
          </p>
          {% endif %}
          <p class="mb-1">
            <strong>Average rating:</strong>
            {% if avg_rating %}{{ avg_rating|floatformat:1 }}/5{% else %}No ratings yet{% endif %}
          </p>
          <div class="mt-3">
            <a href="{% url 'skillzone:conversation' other_user.id %}" class="btn sbz-btn-primary btn-block mb-2">
              Message
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-8">
      <div class="sbz-card">
        <div class="sbz-card-header d-flex justify-content-between align-items-center">
          <h2 class="sbz-card-title mb-0">Skills</h2>
        </div>
        <div class="sbz-card-body">
          {% if skills %}
          <div class="row">
            {% for skill in skills %}
            <div class="col-md-6 mb-3">
              <div class="sbz-skill-chip">
                <div class="sbz-skill-name">{{ skill.name }}</div>
                {% if skill.description %}
                <div class="sbz-skill-description">
                  {{ skill.description|truncatechars:100 }}
                </div>
                {% endif %}
                {% if request.user.is_authenticated and request.user != other_user %}
                <div class="mt-2">
                  <a
                    href="{% url 'skillzone:send_barter_request' skill.id other_user.id %}"
                    class="btn btn-sm sbz-btn-primary"
                  >
                    Request Barter
                  </a>
                </div>
                {% endif %}
              </div>
            </div>
            {% endfor %}
          </div>
          {% else %}
          <p class="text-muted mb-0">This user has not added any skills yet.</p>
          {% endif %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
