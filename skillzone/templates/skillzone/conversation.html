{% extends 'partials/base.html' %} {% block title %}Conversation with {{
other_user.username }}{% endblock %} {% block content %}
<div class="container mt-5 pt-4 min-vh-100">
  <div class="row mb-4">
    <div class="col-12 d-flex justify-content-between align-items-center">
      <h1 class="sbz-page-title">
        Conversation with {{ other_user.username }}
      </h1>
      <a
        href="{% url 'skillzone:user_detail' other_user.id %}"
        class="btn btn-outline-light"
      >
        View Profile
      </a>
    </div>
  </div>

  <div class="sbz-card mb-3">
    <div class="sbz-card-body" style="max-height: 400px; overflow-y: auto">
      {% if messages %} {% for m in messages %}
      <div class="mb-3">
<div class="message-meta small text-muted {% if m.sender == request.user %}outgoing{% else %}incoming{% endif %}">
  {% if m.sender == request.user %}You{% else %}{{ m.sender.username }}{% endif %}
  â€¢ {{ m.created_at }}
</div>
        <div class="message-wrapper">
          <div
            class="sbz-message-bubble {% if m.sender == request.user %}sbz-message-outgoing{% else %}sbz-message-incoming{% endif %}"
          >
            {{ m.body|linebreaksbr }}
          </div>
        </div>
      </div>
      {% endfor %} {% else %}
      <p class="text-muted mb-0">No messages yet. Say hi ðŸ‘‹</p>
      {% endif %}
    </div>
  </div>

  <div class="sbz-card">
    <div class="sbz-card-body">
      <form method="post">
        {% csrf_token %}
        <div class="form-group">
          <textarea
            name="body"
            rows="3"
            class="form-control"
            placeholder="Type your message..."
            required
          ></textarea>
        </div>
        <div class="d-flex justify-content-end">
          <button type="submit" class="btn sbz-btn-primary">Send</button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
